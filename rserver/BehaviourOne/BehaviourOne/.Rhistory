rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
head(df,14)
summary(df)
info()
object_size(df)
ob
object.size(df)
ls
ls
ls()
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
plot1
plot2
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
dfi
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
heaat_plot
heat_plot
tsne_res <- tsne(as.matrix(down_df[, column_list])) tsne_kmeans <- kmeans(tsne_res, centers = 4, nstart = 100) tsne_colors <- as.factor(tsne_kmeans$cluster) down_df$VisualClustering <- tsne_kmeans$cluster plot2 <- qplot(tsne_res[, 1], tsne_res[, 2],                        shape = down_df$AssignmentID,                        color = tsne_colors) plot2 <- plot2 + theme(legend.position = "none")
rtsne_res <- Rtsne(as.matrix(down_df[, subcluster_column_list]),                        check_duplicates = FALSE,                        pca = FALSE) tsne_kmeans <- kmeans(rtsne_res$Y, centers = 4, nstart = 100) tsne_colors <- as.factor(tsne_kmeans$cluster) down_df$VisualClustering <- tsne_kmeans$cluster plot2 <- qplot(rtsne_res$Y[, 1], rtsne_res$Y[, 2],                        shape = down_df$ID,                        color = tsne_colors) plot2 <- plot2 + theme(legend.position = "none")
plot2
rxK
rxKmeans
rxKmeans
library("MicrosoftML")
install.packages("MicrosoftML")
library(RevoScaleR)
install.packages("RevoScaleR")
install.packages("RevoScaleR")
install.packages("RevoScaleR")
install.packages("RevoScaleR")
library(RevoScaleR)
install.packages("Rtsne")
install.packages("ggplot2")
install.packages("RODBC")
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
library(RODBC)
install.packages("RODBC")
library("RODBC")
df
df
library(RevoScaleR)
?rxImport
tempdir()
tempdir()
tempdir()
tempdir()
tempdir()
dir
dirname()
dirname(sys.frame(1)$ofile)
source("behaviour_full.R", chdir = T)
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
?rxKmeans
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
df_sub
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
n
n
n
n
df_sub
df_subcenters
head(df_subcenters)
n
n
n
n
n
head(df_subcenters,10)
clust_column
cl
Q
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
plot1
warrnings()
warnings()
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
trained_model$centers
trained_model$cluster
?rxKmeans
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
proc.time()
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
plot1
Sys.time()
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
all_log
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
all_log
cat(all_log)
df_downsampled
head(df_downsampled)
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
head(df_downsampled)
head(df)
tail(df)
rtsn
rtsne_res$Y
rtsne_res$Y[1]
rtsne_res$Y[2]
rtsne_res$Y[,2]
rtsne_res$Y[,1]
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
head(df)
tail(df)
all_log
colnames(df)
ttt<-c()
ttt[10]
ttt[10]==1
ttt[10]==0
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
df[,column_list]
head(df[,column_list])
sum(is.na(df))
sum(is.na(df[,column_list]))
head(df[is.na(df),])
?is.na
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
n
sum(is.na(df))
df[is.na(df),]
df[is.na(df)]
head(df[is.na(df)])
Q
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
n
head(is.na(dfi))
head(dfi)
head(dfi[is.na(dfi)])
head(dfi[is.na(dfi),])
dfi[is.na(dfi)]
head(dfi)
sum(is.na(dfi))
sum(is.na(df))
sum(is.na(df))
Q
source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R", encoding = "Windows-1252")
head(df)
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
n
sum(is.na(df))
sum(is.na(dfi))
head(is.na(dfi))
nrow(is.na(dfi))
rowS(is.na(dfi))
rowSums(is.na(dfi))
sum(is.na(dfi))
sum(is.na(dfi))
sum(is.na(df))
dfi[dfi[,cust_column]==-1,]
sum(is.na(df))
sum(is.na(df))
new_col
nr_input_fields
i
c
c
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
n
sum(is.na(df))
sum(is.na(dfi))
head(df)
head(dfi$NEASOCIATE)
rowSums(dfi)
colSums(dfi)
Q
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
plot2
plot1
summary(df)
summary(dfi)
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
plot2
rtvs::debug_source("D:/Dropbox/_HYPERLOOP/rserver/BehaviourOne/BehaviourOne/behaviour_full.R")
plot2
plot3d <- scatter3d(             down_df[, x_dim], down_df[, y_dim], down_df[, z_dim],             xlab = x_dim_lbl,             ylab = y_dim_lbl,             zlab = z_dim_lbl,             groups = down_df[, c_dim],             surface = FALSE, grid = FALSE, ellipsoid = TRUE,             sphere.size = 2)
plot2
plot3d
plot3d
plot3d <- scatter3d(             down_df[, x_dim], down_df[, y_dim], down_df[, z_dim],             xlab = x_dim_lbl,             ylab = y_dim_lbl,             zlab = z_dim_lbl,             groups = down_df[, c_dim],             surface = FALSE, grid = FALSE, ellipsoid = TRUE,             sphere.size = 2)
head(down_df)
?rxK
?xKmeans
?rxKmeans
plot2
plot1
head(df_downsampled,20)
head(df_downsampled,30)
head(df_downsampled,25)
which.max(df_downsampled)
which.max(df_downsampled[1,])
which.max(df_downsampled[1,])
ALL_CATEGS <- c("BATISTE", "STREPSILS", "PHARMA", "COSMETICE",                 "DERMOCOSMETICE", "BABY", "NEASOCIATE") ALL_BRANDS <- c("BrandGeneral", "DR_HART", "NUROFEN", "APIVITA", "AVENE", "L_OCCITANE", "VICHY",                 "BIODERMA", "LA_ROCHE_POSAY", "L_ERBOLARIO", "PARASINUS", "TRUSSA", "SORTIS", "NESTLE",                 "OXYANCE", "TERTENSIF", "ASPENTER", "ALPHA")
which.max(df_downsampled[1,ALL_CATEGS])
ALL_CATEGS
which.max(df_downsampled[1,ALL_CATEGS])
which.max(df[1,ALL_CATEGS])
head(df)
df[1,ALL_CATEGS]
which.max(df[1,ALL_CATEGS])
head(down_df)
ttt = which.max(df[1,ALL_CATEGS])
ttt
type
typeof(ttt)
colnames(df[,ttt])
colnames(df[,1])
colnames(df[,2])
colnames(df[,ALL_CATEGS])[ttt]
timeit("Labeling down_df ", down_df <- GetMaxes(dfd, "BESTOF", ALL_BRANDS, ALL_CATEGS))
GetMaxes = function(dfd, newfield, categ1, categ2) {     for (i in 1:nrow(dfd)) {         best_categ1_index <- which.max(dfd[i, categ1])         best_categ1 <- colnames(dfd[i, categ1])[best_categ1_index]         best_categ2_index <- which.max(dfd[i, categ2])         best_categ2 <- colnames(dfd[i, categ2])[best_categ2_index]         dfd[i, newfield] <- paste(best_categ1, ",", best_categ2)     }     return(dfd) }
timeit("Labeling down_df ", down_df <- GetMaxes(dfd, "BESTOF", ALL_BRANDS, ALL_CATEGS))
timeit("Labeling down_df ", down_df <- GetMaxes(down_df, "BESTOF", ALL_BRANDS, ALL_CATEGS))
head(down_df)
head(df,1)
df[df$IDCLU==1 & df$SCLID==1,]
head(df[df$IDCLU==1 & df$SCLID==1,])
head(df[df$IDCLU==1 & df$SCLID==1,ALL_COLUMNS])
summary(df[df$IDCLU==1 & df$SCLID==1,ALL_COLUMNS])
summary(df[df[,ALL_COLUMNS]==-1,ALL_COLUMNS])
summary(df[df[,ALL_COLUMNS]==0.001,ALL_COLUMNS])
summary(df[df[df$IDCLU==1 & df$SCLID==1,ALL_COLUMNS]==0.001,ALL_COLUMNS])
summary(df[df$IDCLU==1 & df$SCLID==1 & df[,ALL_COLUMNS]==0.001,ALL_COLUMNS])
summary(df[df$IDCLU==1 & df$SCLID==1,ALL_COLUMNS])
head(df[df$IDCLU==1 & df$SCLID==1,ALL_COLUMNS],50)
head(df[df$IDCLU==1 & df$SCLID==1,ALL_COLUMNS],60)
head(df[df$IDCLU==1 & df$SCLID==1,ALL_COLUMNS],55)
summary(head(df[df$IDCLU==1 & df$SCLID==1,ALL_COLUMNS],55))
head(df[df[,ALL_COLUMNS]==0.001,])
head(df[df[df$IDCLU==1 & df$CLID==1,ALL_COLUMNS]==0.001,])
head(df[df[df$IDCLU==1 & df$SCLID==1,ALL_COLUMNS]==0.001,])
head(df[df$IDCLU==1 & df$SCLID==1,ALL_COLUMNS])
summary(df[df$IDCLU==1 & df$SCLID==1,ALL_COLUMNS])
summary(head(df[df$IDCLU==1 & df$SCLID==1,ALL_COLUMNS]))
head(df[df$IDCLU==1 & df$SCLID==1,ALL_COLUMNS])
head(df[df$IDCLU==1 & df$SCLID==1,ALL_COLUMNS])
summary(head(df[df$IDCLU==1 & df$SCLID==1,ALL_COLUMNS]))
head(down_df)
tail(down_df)
GetMaxes = function(dfd, newfield, categ1, categ2) {     for (i in 1:nrow(dfd)) {         best_categ1_index <- which.max(dfd[i, categ1])         best_categ1 <- colnames(dfd[i, categ1])[best_categ1_index]         best_categ2_index <- which.max(dfd[i, categ2])         best_categ2 <- colnames(dfd[i, categ2])[best_categ2_index]         dfd[i, newfield] <- paste0(best_categ1, ",", best_categ2)     }     return(dfd) }
timeit("Labeling down_df ", down_df <- GetMaxes(down_df, "BESTOF", ALL_BRANDS, ALL_CATEGS))
tail(down_df)
rtsne_res <- Rtsne(as.matrix(down_df[, subcluster_column_list]),                        check_duplicates = FALSE,                        pca = FALSE) tsne_kmeans <- kmeans(rtsne_res$Y, centers = 4, nstart = 100) tsne_colors <- as.factor(tsne_kmeans$cluster) down_df$VisualClustering <- tsne_kmeans$cluster plot2 <- qplot(rtsne_res$Y[, 1], rtsne_res$Y[, 2],                        shape = down_df$ID,                        color = tsne_colors) plot2 <- plot1 + geom_text(aes_string(label = "BESTOF"),                                    color = "black", size = 3) plot2 <- plot2 + theme(legend.position = "none") plot2
heaD(down_df$BESTOF)
head(down_df$BESTOF)
tsne_kmeans <- kmeans(rtsne_res$Y, centers = 4, nstart = 100) tsne_colors <- as.factor(tsne_kmeans$cluster) down_df$VisualClustering <- tsne_kmeans$cluster plot2 <- qplot(rtsne_res$Y[, 1], rtsne_res$Y[, 2],                        shape = down_df$ID,                        color = tsne_colors) plot2 <- plot1 + geom_text(aes_string(label = down_df$BESTOF),                                    color = "black", size = 3) plot2 <- plot2 + theme(legend.position = "none") plot2
tsne_kmeans <- kmeans(rtsne_res$Y, centers = 4, nstart = 100) tsne_colors <- as.factor(tsne_kmeans$cluster) down_df$VisualClustering <- tsne_kmeans$cluster plot2 <- qplot(rtsne_res$Y[, 1], rtsne_res$Y[, 2],                        shape = down_df$ID,                        color = tsne_colors) plot2 <- plot1 + geom_text(aes(label = down_df$BESTOF),                                color = "black", size = 3) plot2 <- plot2 + theme(legend.position = "none") plot2
tsne_kmeans <- kmeans(rtsne_res$Y, centers = 4, nstart = 100) tsne_colors <- as.factor(tsne_kmeans$cluster) down_df$VisualClustering <- tsne_kmeans$cluster plot2 <- qplot(rtsne_res$Y[, 1], rtsne_res$Y[, 2],                        shape = down_df$ID,                        color = tsne_colors) plot2 <- plot2 + theme(legend.position = "none") plot2
tsne_kmeans <- kmeans(rtsne_res$Y, centers = 4, nstart = 100) tsne_colors <- as.factor(tsne_kmeans$cluster) down_df$VisualClustering <- tsne_kmeans$cluster plot2 <- qplot(rtsne_res$Y[, 1], rtsne_res$Y[, 2],                        shape = down_df$ID,                        color = tsne_colors) plot2 <- plot1 + geom_text(aes(label = down_df$BESTOF),                                color = "black", size = 1) plot2 <- plot2 + theme(legend.position = "none") plot2
tsne_kmeans <- kmeans(rtsne_res$Y, centers = 4, nstart = 100) tsne_colors <- as.factor(tsne_kmeans$cluster) down_df$VisualClustering <- tsne_kmeans$cluster plot2 <- qplot(rtsne_res$Y[, 1], rtsne_res$Y[, 2],                        shape = down_df$ID,                        color = tsne_colors) plot2 <- plot2 + geom_text(aes(label = down_df$BESTOF),                                color = "black", size = 1) plot2 <- plot2 + theme(legend.position = "none") plot2
tsne_kmeans <- kmeans(rtsne_res$Y, centers = 4, nstart = 100) tsne_colors <- as.factor(tsne_kmeans$cluster) down_df$VisualClustering <- tsne_kmeans$cluster plot2 <- qplot(rtsne_res$Y[, 1], rtsne_res$Y[, 2],                        shape = down_df$ID,                        color = tsne_colors) plot2 <- plot2 + geom_text(aes(label = down_df$BESTOF),                                color = "black", size = 2) plot2 <- plot2 + theme(legend.position = "none") plot2
plot1
